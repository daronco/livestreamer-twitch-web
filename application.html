<head>
  <title>livestreamer-twitch-web</title>
</head>

<body>
  {{> navbar}}
  {{> streams}}
</body>

<template name="navbar">
  <div id="navbar">
    <div class="title-bar">
      <div class="title-bar-left">
        Followed | Featured | All
      </div>
      <div class="title-bar-right">
        {{#if currentUser}}
          <button id="logout-btn" type="button">Logout</button>
          <div class="username">{{currentUser.profile.name}}</div>
        {{else}}
          {{> twitchLoginButton}}
        {{/if}}
      </div>
    </div>

    {{#if hasStreamOnAir}}
      {{> onAir}}
    {{/if}}
  </div>
</template>

<template name="onAir">
  <div id="on-air" class="title-bar {{loadingClass}}">

    {{#if loadingClass}}
      <div class="spinner">
        <div class="bounce1"></div>
        <div class="bounce2"></div>
        <div class="bounce3"></div>
      </div>
    {{/if}}

    <div class="live-ico">live</div>
    <div class="stream-description">
      <span class="stream-name">{{streamOnAir.channel.name}}</span> playing
      <span class="stream-game">{{streamOnAir.data.game}}</span> for
      <span class="stream-viewers">{{streamOnAir.data.viewers}}</span> viewers
    </div>
    <div class="stream-status">{{streamOnAir.channel.data.status}}</div>
  </div>
</template>

<template name="streams">
  <ul id="streams">
    {{#each followedStream}}
    <li class="stream {{selectedClass}}">
      <img src="{{data.preview.large}}" />
      <div class="stream-info-overlay">
        <div class="stream-description">
          <span class="stream-name">{{channel.name}}</span>
          <span class="stream-viewers">{{data.viewers}}</span>
          <span class="stream-game">{{data.game}}</span>
        </div>
        <div class="stream-status">{{channel.data.status}}</div>
      </div>
    </li>
    {{/each}}
  </ul>
</template>
